var RangeSlider=function(){function t(){for(var t=Array.prototype.shift.call(arguments),e=0;e<arguments.length;e++)for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t}function e(t,e,i){var s;return function(){var n=this,a=arguments,r=function(){s=null,i||t.apply(n,a)},o=i&&!s;clearTimeout(s),s=setTimeout(r,e),o&&t.apply(n,a)}}function i(t,e){t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function s(t){var e=document.body.getBoundingClientRect(),i=t.getBoundingClientRect(),s={left:i.left-e.left,max:i.left-e.left+t.clientWidth};return s}function n(t,e,i){return e.forEach(function(e,i,s){t.classList.add(e)}),t.firstChild.appendChild(document.createTextNode(i)),t.setAttribute("data-rs-value",i),t}function a(t,e){return t?t.value:e}function r(i,n){if(!i)return void console.info("No node to attach Slider to");this.config={steps:a(i.attributes["data-rs-steps"],!1),min:parseInt(a(i.attributes["data-rs-min"],0)),max:parseInt(a(i.attributes["data-rs-max"],100)),onRangeChange:function(){},afterInit:function(){}},this.config=t(this.config,n),this.baseElement=i,this.isStepped=!1,this.init();var r=this;this.slide(this.rangeWidth,"%"),this.pointer.addEventListener("mousedown",function(t){1===t.which&&(t.preventDefault(),t.stopPropagation(),r.isFocussed=!0,(0===r.ptDrag.minOffset||0===r.ptDrag.maxOffset)&&(r.initDragObject(),r.width=i.clientWidth),r.ptDrag.start=this.style.left,this.classList.remove("transitionable"),r.rangeProgress.classList.remove("transitionable"))}),window.addEventListener("mousemove",e(function(t){if(r.isFocussed===!0){var e;t.clientX<r.ptDrag.minOffset&&(e=r.evalPosition(r.ptDrag.minOffset)),t.clientX>r.ptDrag.maxOffset&&(e=r.evalPosition(r.ptDrag.maxOffset)),t.clientX>r.ptDrag.minOffset&&t.clientX<r.ptDrag.maxOffset&&(e=r.evalPosition(t.clientX)),r.slide(e,"%");var i=s(r.pointer);r.ptDrag.lastOffset=i.left,i.left<r.ptDrag.minOffset&&(r.ptDrag.lastOffset=r.ptDrag.minOffset),i.left>r.ptDrag.maxOffset&&(r.ptDrag.lastOffset=r.ptDrag.maxOffset);var n=r.evalPosition(r.ptDrag.lastOffset);n=Math.ceil(n)/100*r.scope,r.setRange(Math.ceil(n)+r.config.min)}}),350),window.addEventListener("mouseup",function(t){if(r.isFocussed===!0){r.isFocussed=!1;var e=r.evalPosition(r.ptDrag.lastOffset);e=Math.ceil(e)/100*r.scope,r.setRange(Math.ceil(e)+r.config.min),r.pointer.classList.add("transitionable"),r.rangeProgress.classList.add("transitionable")}}),window.addEventListener("resize",function(t){r.isFocussed=!1,r.reInit()}),this.isStepped?Array.prototype.forEach.call(r.ranges,function(t,e,i){t.style.width=r.rangeWidth+"%",t.addEventListener("click",function(){Array.prototype.forEach.call(r.ranges,function(t,e,i){t.classList.remove("highlighted")}),this.classList.add("highlighted"),r.slide((e+1)*r.rangeWidth,"%"),r.currentRange=this.getAttribute("data-rs-value"),r.config.onRangeChange(r)})}):this.baseElement.addEventListener("click",function(t){if(t.target!==r.pointer){var e=r.evalPosition(t.clientX);e=e/100*r.scope,r.setRange(Math.ceil(e)+r.config.min)}}),this.config.afterInit(r)}return r.prototype.getRange=function(){return parseInt(this.currentRange)},r.prototype.setRange=function(t){if(t=parseInt(t),t=t<this.config.min?this.config.min:t,t=t>this.config.max?this.config.max:t,this.isStepped){var e=0,i=this.scope/this.size;do e+=1;while(this.config.min+i*e<t);this.ranges[e-1].click()}else{var s=(t-this.config.min)/this.scope;s*=100,this.currentRange=t,this.slide(s,"%")}this.config.onRangeChange(this)},r.prototype.updateProgress=function(t){t>60?t>=85?this.rangeProgress.classList.add("danger"):(this.rangeProgress.classList.remove("danger"),this.rangeProgress.classList.add("caution")):this.rangeProgress.classList.remove("caution","danger")},r.prototype.slide=function(t,e){this.pointer.style.left=t-1+e,this.rangeProgress.style.width=t+e,this.updateProgress(t)},r.prototype.initDragObject=function(){this.width=this.baseElement.clientWidth;var t=s(this.baseElement);this.ptDrag={minOffset:t.left,maxOffset:t.max,lastOffset:0,start:0}},r.prototype.init=function(){this.baseElement.innerHTML="",i(this.baseElement,"range-slider")||this.baseElement.classList.add("range-slider"),this.pointer=document.createElement("span"),this.rangeProgress=document.createElement("span"),this.pointer.classList.add("pointer","transitionable"),this.rangeProgress.classList.add("range-progress","transitionable"),this.baseElement.appendChild(this.pointer),this.baseElement.appendChild(this.rangeProgress),this.scope=this.config.max-this.config.min,this.currentRange=this.config.min,this.ptDrag={},this.width=this.baseElement.clientWidth,this.isFocussed=!1,this.initDragObject(),this.config.steps&&(this.size=parseInt(this.config.steps),this.ranges=this.createRangeNodes(),this.rangeWidth=100/this.size,this.isStepped=!0)},r.prototype.reInit=function(){this.currentRange=this.config.min,this.ptDrag={},this.width=this.baseElement.clientWidth,this.isFocussed=!1,this.initDragObject()},r.prototype.evalPosition=function(t){return(t-this.ptDrag.minOffset)/this.width*100},r.prototype.createRangeNodes=function(){for(var t=this,e=["range","stepped"],i=this.scope/this.size,s=[],a=1;a<=t.size;a++){var r=document.createElement("span");switch(r.appendChild(document.createElement("p")),!0){case 0===a:r=n(r,e,String(t.config.min+a*i)),r.classList.add("highlighted");break;case t.size-a===0:r=n(r,e,t.config.max);break;default:r=n(r,e,String(Math.round(t.config.min+a*i)))}t.baseElement.appendChild(r),s.push(r)}return s},{create:function(t,e){var i=new r(document.querySelector(t),e);return i}}}();